services:
    alex_dpy_acl.acl_manager:
        class: AlexDpy\AclBundle\Manager\AclManager
        arguments:
            - @security.token_storage
            - @security.acl.provider
        calls:
            - [ setPermissionMap, [ @alex_dpy_acl.permission_map ] ]

    alex_dpy_acl.acl_checker:
        class: AlexDpy\AclBundle\Manager\AclChecker
        arguments:
            - @alex_dpy_acl.acl_manager
            - @security.authorization_checker
            - @security.access.decision_manager

    alex_dpy_acl.twig.security_extension:
        class: AlexDpy\AclBundle\Twig\SecurityExtension
        arguments: [ @alex_dpy_acl.acl_checker ]
        tags:
            - { name: twig.extension }
